<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1800 1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #34495e; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #2c3e50; }
      .small-text { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .code { font-family: 'Courier New', monospace; font-size: 12px; fill: #2c3e50; }
      .highlight { fill: #3498db; }
      .warning { fill: #e74c3c; }
      .success { fill: #27ae60; }
      .info { fill: #f39c12; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="1800" height="1400" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="900" y="40" text-anchor="middle" class="title">Recursive Functions - Concepts &amp; Implementation</text>
  <text x="900" y="70" text-anchor="middle" class="text">Self-Calling Functions with Base Cases and Practical Examples</text>

  <!-- Recursion Concept -->
  <g transform="translate(50, 100)">
    <text x="0" y="0" class="subtitle">1. Recursion Fundamentals</text>

    <g transform="translate(0, 40)">
      <rect x="0" y="0" width="800" height="120" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" rx="5"/>

      <text x="20" y="25" class="text" font-weight="bold">What is Recursion?</text>
      <text x="30" y="45" class="text">A function that calls itself to solve a smaller instance of the same problem</text>

      <text x="20" y="75" class="text" font-weight="bold">Essential Components:</text>
      <text x="30" y="95" class="text">1. Base Case: Condition that stops the recursion</text>
      <text x="30" y="115" class="text">2. Recursive Case: Function calls itself with modified parameters</text>
    </g>

    <!-- Recursion vs Iteration -->
    <g transform="translate(0, 180)">
      <text x="0" y="0" class="text" font-weight="bold">Recursion vs Iteration:</text>

      <g transform="translate(0, 30)">
        <!-- Recursive approach -->
        <rect x="0" y="0" width="380" height="80" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
        <text x="190" y="20" text-anchor="middle" class="text" fill="white" font-weight="bold">Recursive Approach</text>
        <text x="20" y="40" class="small-text" fill="white">• Function calls itself</text>
        <text x="20" y="55" class="small-text" fill="white">• Uses function call stack</text>
        <text x="20" y="70" class="small-text" fill="white">• More elegant for tree-like problems</text>

        <!-- Iterative approach -->
        <rect x="420" y="0" width="380" height="80" fill="#27ae60" stroke="#229954" stroke-width="2" rx="5"/>
        <text x="610" y="20" text-anchor="middle" class="text" fill="white" font-weight="bold">Iterative Approach</text>
        <text x="440" y="40" class="small-text" fill="white">• Uses loops (for, while)</text>
        <text x="440" y="55" class="small-text" fill="white">• Uses explicit data structures</text>
        <text x="440" y="70" class="small-text" fill="white">• Generally more memory efficient</text>
      </g>
    </g>
  </g>

  <!-- Factorial Example -->
  <g transform="translate(50, 380)">
    <text x="0" y="0" class="subtitle">2. Factorial Example: n! = n × (n-1)!</text>

    <!-- Mathematical Definition -->
    <g transform="translate(0, 40)">
      <rect x="0" y="0" width="400" height="100" fill="#f39c12" stroke="#e67e22" stroke-width="2" rx="5"/>
      <text x="20" y="25" class="text" fill="white" font-weight="bold">Mathematical Definition:</text>
      <text x="30" y="45" class="text" fill="white">factorial(0) = 1 (Base case)</text>
      <text x="30" y="65" class="text" fill="white">factorial(n) = n × factorial(n-1)</text>
      <text x="30" y="85" class="text" fill="white">for n > 0</text>
    </g>

    <!-- Call Stack Visualization -->
    <g transform="translate(450, 40)">
      <text x="0" y="0" class="text" font-weight="bold">Call Stack for factorial(4):</text>

      <!-- Stack frames -->
      <g transform="translate(0, 20)">
        <!-- Frame 4 -->
        <rect x="0" y="0" width="120" height="25" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
        <text x="60" y="17" text-anchor="middle" class="small-text" fill="white">factorial(4)</text>
        <text x="130" y="17" class="small-text">4 × factorial(3)</text>

        <!-- Frame 3 -->
        <rect x="0" y="25" width="120" height="25" fill="#e67e22" stroke="#d35400" stroke-width="2"/>
        <text x="60" y="42" text-anchor="middle" class="small-text" fill="white">factorial(3)</text>
        <text x="130" y="42" class="small-text">3 × factorial(2)</text>

        <!-- Frame 2 -->
        <rect x="0" y="50" width="120" height="25" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
        <text x="60" y="67" text-anchor="middle" class="small-text" fill="white">factorial(2)</text>
        <text x="130" y="67" class="small-text">2 × factorial(1)</text>

        <!-- Frame 1 -->
        <rect x="0" y="75" width="120" height="25" fill="#f1c40f" stroke="#f39c12" stroke-width="2"/>
        <text x="60" y="92" text-anchor="middle" class="small-text" fill="white">factorial(1)</text>
        <text x="130" y="92" class="small-text">1 × factorial(0)</text>

        <!-- Frame 0 - Base case -->
        <rect x="0" y="100" width="120" height="25" fill="#27ae60" stroke="#229954" stroke-width="2"/>
        <text x="60" y="117" text-anchor="middle" class="small-text" fill="white">factorial(0)</text>
        <text x="130" y="117" class="small-text" fill="#27ae60">returns 1</text>

        <!-- Return arrows -->
        <path d="M 250 110 L 280 100" stroke="#27ae60" stroke-width="2" marker-end="url(#arrowhead-green)"/>
        <text x="290" y="110" class="small-text">1</text>

        <path d="M 250 85 L 280 75" stroke="#f1c40f" stroke-width="2" marker-end="url(#arrowhead-yellow)"/>
        <text x="290" y="85" class="small-text">1 × 1 = 1</text>

        <path d="M 250 60 L 280 50" stroke="#f39c12" stroke-width="2" marker-end="url(#arrowhead-orange)"/>
        <text x="290" y="60" class="small-text">2 × 1 = 2</text>

        <path d="M 250 35 L 280 25" stroke="#e67e22" stroke-width="2" marker-end="url(#arrowhead-red)"/>
        <text x="290" y="35" class="small-text">3 × 2 = 6</text>

        <path d="M 250 10 L 280 0" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-dark-red)"/>
        <text x="290" y="10" class="small-text">4 × 6 = 24</text>
      </g>
    </g>

    <!-- Implementation -->
    <g transform="translate(0, 170)">
      <text x="0" y="0" class="text" font-weight="bold">Python Implementation:</text>

      <rect x="0" y="20" width="500" height="200" fill="#2c3e50" stroke="#34495e" stroke-width="2" rx="5"/>

      <text x="20" y="45" class="code" fill="#3498db">def factorial(n):</text>
      <text x="40" y="65" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="85" class="code" fill="#ecf0f1">Calculate factorial using recursion</text>
      <text x="40" y="105" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="125" class="code" fill="#f39c12"># Base case</text>
      <text x="40" y="145" class="code" fill="#ecf0f1">if n == 0 or n == 1:</text>
      <text x="60" y="165" class="code" fill="#27ae60">return 1</text>
      <text x="40" y="185" class="code" fill="#f39c12"># Recursive case</text>
      <text x="40" y="205" class="code" fill="#ecf0f1">return n * factorial(n - 1)</text>
    </g>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
    <marker id="arrowhead-yellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f1c40f"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f39c12"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e67e22"/>
    </marker>
    <marker id="arrowhead-dark-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c"/>
    </marker>
  </defs>

  <!-- Fibonacci Example -->
  <g transform="translate(900, 100)">
    <text x="0" y="0" class="subtitle">3. Fibonacci Series: F(n) = F(n-1) + F(n-2)</text>

    <!-- Mathematical Definition -->
    <g transform="translate(0, 40)">
      <rect x="0" y="0" width="400" height="120" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5"/>
      <text x="20" y="25" class="text" fill="white" font-weight="bold">Mathematical Definition:</text>
      <text x="30" y="45" class="text" fill="white">F(0) = 0 (Base case 1)</text>
      <text x="30" y="65" class="text" fill="white">F(1) = 1 (Base case 2)</text>
      <text x="30" y="85" class="text" fill="white">F(n) = F(n-1) + F(n-2)</text>
      <text x="30" y="105" class="text" fill="white">for n > 1</text>
    </g>

    <!-- Recursion Tree -->
    <g transform="translate(0, 180)">
      <text x="0" y="0" class="text" font-weight="bold">Recursion Tree for F(5):</text>

      <g transform="translate(150, 30)">
        <!-- Root F(5) -->
        <circle cx="100" cy="20" r="18" fill="#9b59b6" stroke="#8e44ad" stroke-width="2"/>
        <text x="100" y="26" text-anchor="middle" class="small-text" fill="white">F(5)</text>

        <!-- Level 1 -->
        <circle cx="50" cy="70" r="15" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
        <text x="50" y="76" text-anchor="middle" class="small-text" fill="white">F(4)</text>

        <circle cx="150" cy="70" r="15" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
        <text x="150" y="76" text-anchor="middle" class="small-text" fill="white">F(3)</text>

        <!-- Level 2 -->
        <circle cx="25" cy="120" r="12" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
        <text x="25" y="126" text-anchor="middle" class="small-text" fill="white">F(3)</text>

        <circle cx="75" cy="120" r="12" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
        <text x="75" y="126" text-anchor="middle" class="small-text" fill="white">F(2)</text>

        <circle cx="125" cy="120" r="12" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
        <text x="125" y="126" text-anchor="middle" class="small-text" fill="white">F(2)</text>

        <circle cx="175" cy="120" r="12" fill="#27ae60" stroke="#229954" stroke-width="2"/>
        <text x="175" y="126" text-anchor="middle" class="small-text" fill="white">F(1)</text>

        <!-- Level 3 - Base cases -->
        <circle cx="15" cy="170" r="10" fill="#f39c12" stroke="#e67e22" stroke-width="1"/>
        <text x="15" y="175" text-anchor="middle" class="small-text" fill="white">F(2)</text>

        <circle cx="35" cy="170" r="10" fill="#27ae60" stroke="#229954" stroke-width="2"/>
        <text x="35" y="175" text-anchor="middle" class="small-text" fill="white">F(1)</text>

        <circle cx="65" cy="170" r="10" fill="#27ae60" stroke="#229954" stroke-width="2"/>
        <text x="65" y="175" text-anchor="middle" class="small-text" fill="white">F(1)</text>

        <circle cx="85" cy="170" r="10" fill="#3498db" stroke="#2980b9" stroke-width="2"/>
        <text x="85" y="175" text-anchor="middle" class="small-text" fill="white">F(0)</text>

        <!-- Edges -->
        <line x1="100" y1="38" x2="50" y2="55" stroke="#8e44ad" stroke-width="2"/>
        <line x1="100" y1="38" x2="150" y2="55" stroke="#8e44ad" stroke-width="2"/>

        <line x1="50" y1="85" x2="25" y2="108" stroke="#c0392b" stroke-width="1"/>
        <line x1="50" y1="85" x2="75" y2="108" stroke="#c0392b" stroke-width="1"/>

        <line x1="150" y1="85" x2="125" y2="108" stroke="#c0392b" stroke-width="1"/>
        <line x1="150" y1="85" x2="175" y2="108" stroke="#c0392b" stroke-width="1"/>

        <line x1="25" y1="132" x2="15" y2="160" stroke="#e67e22" stroke-width="1"/>
        <line x1="25" y1="132" x2="35" y2="160" stroke="#e67e22" stroke-width="1"/>

        <line x1="75" y1="132" x2="65" y2="160" stroke="#e67e22" stroke-width="1"/>
        <line x1="75" y1="132" x2="85" y2="160" stroke="#e67e22" stroke-width="1"/>

        <!-- Value annotations -->
        <text x="175" y="145" class="small-text" fill="#27ae60">= 1</text>
        <text x="65" y="195" class="small-text" fill="#27ae60">= 1</text>
        <text x="85" y="195" class="small-text" fill="#3498db">= 0</text>
      </g>

      <!-- Problem with naive recursion -->
      <g transform="translate(0, 250)">
        <rect x="0" y="0" width="400" height="60" fill="#e74c3c" stroke="#c0392b" stroke-width="2" rx="5"/>
        <text x="20" y="20" class="text" fill="white" font-weight="bold">Problem: Repeated Calculations!</text>
        <text x="20" y="40" class="text" fill="white">F(2) calculated multiple times</text>
        <text x="20" y="55" class="text" fill="white">Time Complexity: O(2^n) - Exponential!</text>
      </g>
    </g>

    <!-- Implementation -->
    <g transform="translate(0, 470)">
      <text x="0" y="0" class="text" font-weight="bold">Python Implementation:</text>

      <rect x="0" y="20" width="500" height="220" fill="#2c3e50" stroke="#34495e" stroke-width="2" rx="5"/>

      <text x="20" y="45" class="code" fill="#3498db">def fibonacci(n):</text>
      <text x="40" y="65" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="85" class="code" fill="#ecf0f1">Calculate Fibonacci number recursively</text>
      <text x="40" y="105" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="125" class="code" fill="#f39c12"># Base cases</text>
      <text x="40" y="145" class="code" fill="#ecf0f1">if n == 0:</text>
      <text x="60" y="165" class="code" fill="#27ae60">return 0</text>
      <text x="40" y="185" class="code" fill="#ecf0f1">if n == 1:</text>
      <text x="60" y="205" class="code" fill="#27ae60">return 1</text>
      <text x="40" y="225" class="code" fill="#f39c12"># Recursive case</text>
      <text x="40" y="245" class="code" fill="#ecf0f1">return fibonacci(n-1) + fibonacci(n-2)</text>
    </g>
  </g>

  <!-- Types of Recursion -->
  <g transform="translate(50, 750)">
    <text x="0" y="0" class="subtitle">4. Types of Recursion</text>

    <g transform="translate(0, 40)">
      <!-- Direct Recursion -->
      <g transform="translate(0, 0)">
        <rect x="0" y="0" width="300" height="100" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
        <text x="150" y="25" text-anchor="middle" class="text" fill="white" font-weight="bold">Direct Recursion</text>
        <text x="20" y="45" class="small-text" fill="white">Function calls itself directly</text>
        <text x="20" y="60" class="small-text" fill="white">Example: factorial(n) calls factorial(n-1)</text>
        <text x="20" y="80" class="small-text" fill="white">Most common type</text>
      </g>

      <!-- Indirect Recursion -->
      <g transform="translate(350, 0)">
        <rect x="0" y="0" width="300" height="100" fill="#27ae60" stroke="#229954" stroke-width="2" rx="5"/>
        <text x="150" y="25" text-anchor="middle" class="text" fill="white" font-weight="bold">Indirect Recursion</text>
        <text x="20" y="45" class="small-text" fill="white">Function A calls function B</text>
        <text x="20" y="60" class="small-text" fill="white">Function B calls function A</text>
        <text x="20" y="80" class="small-text" fill="white">Creates a cycle of calls</text>
      </g>

      <!-- Tail Recursion -->
      <g transform="translate(700, 0)">
        <rect x="0" y="0" width="300" height="100" fill="#e74c3c" stroke="#c0392b" stroke-width="2" rx="5"/>
        <text x="150" y="25" text-anchor="middle" class="text" fill="white" font-weight="bold">Tail Recursion</text>
        <text x="20" y="45" class="small-text" fill="white">Recursive call is the last operation</text>
        <text x="20" y="60" class="small-text" fill="white">Can be optimized by compiler</text>
        <text x="20" y="80" class="small-text" fill="white">More memory efficient</text>
      </g>

      <!-- Multiple Recursion -->
      <g transform="translate(175, 120)">
        <rect x="0" y="0" width="300" height="100" fill="#f39c12" stroke="#e67e22" stroke-width="2" rx="5"/>
        <text x="150" y="25" text-anchor="middle" class="text" fill="white" font-weight="bold">Multiple Recursion</text>
        <text x="20" y="45" class="small-text" fill="white">Function calls itself multiple times</text>
        <text x="20" y="60" class="small-text" fill="white">Example: Fibonacci calls itself twice</text>
        <text x="20" y="80" class="small-text" fill="white">Can lead to exponential complexity</text>
      </g>

      <!-- Tree Recursion -->
      <g transform="translate(525, 120)">
        <rect x="0" y="0" width="300" height="100" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5"/>
        <text x="150" y="25" text-anchor="middle" class="text" fill="white" font-weight="bold">Tree Recursion</text>
        <text x="20" y="45" class="small-text" fill="white">Multiple recursive calls form tree</text>
        <text x="20" y="60" class="small-text" fill="white">Used in tree/graph algorithms</text>
        <text x="20" y="80" class="small-text" fill="white">Example: Tree traversals</text>
      </g>
    </g>
  </g>

  <!-- Tail Recursion Example -->
  <g transform="translate(900, 750)">
    <text x="0" y="0" class="subtitle">5. Tail Recursion Optimization</text>

    <g transform="translate(0, 40)">
      <text x="0" y="0" class="text" font-weight="bold">Tail Recursive Factorial:</text>

      <rect x="0" y="20" width="600" height="280" fill="#2c3e50" stroke="#34495e" stroke-width="2" rx="5"/>

      <text x="20" y="45" class="code" fill="#3498db">def factorial_tail(n, accumulator=1):</text>
      <text x="40" y="65" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="85" class="code" fill="#ecf0f1">Tail recursive factorial</text>
      <text x="40" y="105" class="code" fill="#ecf0f1">"""</text>
      <text x="40" y="125" class="code" fill="#f39c12"># Base case</text>
      <text x="40" y="145" class="code" fill="#ecf0f1">if n == 0:</text>
      <text x="60" y="165" class="code" fill="#27ae60">return accumulator</text>
      <text x="40" y="185" class="code" fill="#f39c12"># Tail recursive call</text>
      <text x="40" y="205" class="code" fill="#ecf0f1">return factorial_tail(n-1, n*accumulator)</text>

      <text x="20" y="235" class="code" fill="#f39c12"># Call sequence for factorial_tail(4):</text>
      <text x="20" y="255" class="code" fill="#ecf0f1"># factorial_tail(4, 1)</text>
      <text x="20" y="275" class="code" fill="#ecf0f1"># factorial_tail(3, 4)</text>
      <text x="20" y="295" class="code" fill="#ecf0f1"># factorial_tail(2, 12)</text>
    </g>
  </g>

  <!-- Recursion Guidelines -->
  <g transform="translate(50, 1050)">
    <text x="0" y="0" class="subtitle">6. Recursion Best Practices</text>

    <rect x="0" y="20" width="1500" height="200" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" rx="5"/>

    <!-- Do's -->
    <g transform="translate(50, 50)">
      <text x="0" y="0" class="text" font-weight="bold" fill="#27ae60">✓ DO's:</text>
      <text x="20" y="20" class="text">• Always define a clear base case</text>
      <text x="20" y="40" class="text">• Ensure parameters move toward base case</text>
      <text x="20" y="60" class="text">• Use recursion for naturally recursive problems</text>
      <text x="20" y="80" class="text">• Consider memoization for overlapping subproblems</text>
      <text x="20" y="100" class="text">• Test with small inputs first</text>
      <text x="20" y="120" class="text">• Document the recursive invariant</text>
    </g>

    <!-- Don'ts -->
    <g transform="translate(600, 50)">
      <text x="0" y="0" class="text" font-weight="bold" fill="#e74c3c">✗ DON'Ts:</text>
      <text x="20" y="20" class="text">• Don't forget the base case (infinite recursion)</text>
      <text x="20" y="40" class="text">• Don't use recursion for simple iterations</text>
      <text x="20" y="60" class="text">• Don't ignore stack overflow for large inputs</text>
      <text x="20" y="80" class="text">• Don't use naive recursion for Fibonacci-like problems</text>
      <text x="20" y="100" class="text">• Don't modify global variables in recursive functions</text>
      <text x="20" y="120" class="text">• Don't assume tail call optimization in Python</text>
    </g>

    <!-- Common Pitfalls -->
    <g transform="translate(1150, 50)">
      <text x="0" y="0" class="text" font-weight="bold" fill="#f39c12">⚠ Common Pitfalls:</text>
      <text x="20" y="20" class="small-text">• Stack overflow</text>
      <text x="20" y="35" class="small-text">• Exponential time complexity</text>
      <text x="20" y="50" class="small-text">• Missing base cases</text>
      <text x="20" y="65" class="small-text">• Incorrect parameter updates</text>
      <text x="20" y="80" class="small-text">• Memory inefficiency</text>
      <text x="20" y="95" class="small-text">• Debugging difficulty</text>
    </g>
  </g>

  <!-- Applications -->
  <g transform="translate(50, 1280)">
    <text x="0" y="0" class="subtitle">Common Recursive Applications</text>

    <rect x="0" y="20" width="1500" height="80" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" rx="5"/>

    <!-- Applications -->
    <g transform="translate(50, 40)">
      <text x="0" y="20" class="text" font-weight="bold">Tree Traversals</text>
      <text x="0" y="35" class="small-text">Inorder, preorder, postorder</text>

      <text x="200" y="20" class="text" font-weight="bold">Divide &amp; Conquer</text>
      <text x="200" y="35" class="small-text">Merge sort, quick sort</text>

      <text x="400" y="20" class="text" font-weight="bold">Mathematical</text>
      <text x="400" y="35" class="small-text">Factorial, GCD, power</text>

      <text x="600" y="20" class="text" font-weight="bold">Graph Algorithms</text>
      <text x="600" y="35" class="small-text">DFS, backtracking</text>

      <text x="800" y="20" class="text" font-weight="bold">Dynamic Programming</text>
      <text x="800" y="35" class="small-text">With memoization</text>

      <text x="1000" y="20" class="text" font-weight="bold">Parser Design</text>
      <text x="1000" y="35" class="small-text">Recursive descent parsing</text>

      <text x="1200" y="20" class="text" font-weight="bold">Fractals</text>
      <text x="1200" y="35" class="small-text">Self-similar patterns</text>
    </g>
  </g>

</svg>