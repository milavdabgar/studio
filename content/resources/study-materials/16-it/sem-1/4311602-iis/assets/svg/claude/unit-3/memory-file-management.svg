<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#388E3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4CAF50;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="memoryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F5E8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#A5D6A7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="fileGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E3F2FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#90CAF9;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-color="#00000030"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#FAFAFA"/>

  <!-- Header -->
  <rect x="0" y="0" width="1200" height="80" fill="url(#headerGrad)"/>
  <text x="600" y="35" text-anchor="middle" fill="white" font-size="28" font-weight="bold">Memory and File Management</text>
  <text x="600" y="60" text-anchor="middle" fill="white" font-size="16">Virtual Memory, Paging, File Systems, and Directory Structure</text>

  <!-- Memory Management -->
  <g transform="translate(50, 120)">
    <rect x="0" y="0" width="550" height="320" rx="10" fill="white" stroke="#666" stroke-width="2" filter="url(#shadow)"/>
    <text x="275" y="25" text-anchor="middle" fill="#333" font-size="20" font-weight="bold">Memory Management</text>

    <!-- Memory Hierarchy -->
    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="200" height="240" rx="8" fill="url(#memoryGrad)" stroke="#4CAF50" stroke-width="2"/>
      <text x="100" y="20" text-anchor="middle" fill="white" font-size="16" font-weight="bold">Memory Hierarchy</text>

      <!-- CPU Registers -->
      <rect x="20" y="35" width="160" height="25" rx="3" fill="white" stroke="#4CAF50" stroke-width="1"/>
      <text x="100" y="52" text-anchor="middle" fill="#333" font-size="11">CPU Registers</text>

      <!-- Cache Memory -->
      <rect x="20" y="70" width="160" height="25" rx="3" fill="white" stroke="#4CAF50" stroke-width="1"/>
      <text x="100" y="87" text-anchor="middle" fill="#333" font-size="11">Cache Memory (L1, L2, L3)</text>

      <!-- Main Memory -->
      <rect x="20" y="105" width="160" height="25" rx="3" fill="white" stroke="#4CAF50" stroke-width="1"/>
      <text x="100" y="122" text-anchor="middle" fill="#333" font-size="11">Main Memory (RAM)</text>

      <!-- Secondary Storage -->
      <rect x="20" y="140" width="160" height="25" rx="3" fill="white" stroke="#4CAF50" stroke-width="1"/>
      <text x="100" y="157" text-anchor="middle" fill="#333" font-size="11">Secondary Storage (HDD/SSD)</text>

      <!-- Tertiary Storage -->
      <rect x="20" y="175" width="160" height="25" rx="3" fill="white" stroke="#4CAF50" stroke-width="1"/>
      <text x="100" y="192" text-anchor="middle" fill="#333" font-size="11">Tertiary Storage (Optical)</text>

      <text x="100" y="215" text-anchor="middle" fill="#333" font-size="10">↑ Speed ↑</text>
      <text x="100" y="230" text-anchor="middle" fill="#333" font-size="10">↓ Cost per bit ↓</text>
    </g>

    <!-- Memory Allocation Strategies -->
    <g transform="translate(270, 50)">
      <rect x="0" y="0" width="250" height="240" rx="8" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
      <text x="125" y="20" text-anchor="middle" fill="#FF9800" font-size="16" font-weight="bold">Allocation Strategies</text>

      <text x="125" y="45" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Fixed Partitioning:</text>
      <text x="125" y="60" text-anchor="middle" fill="#333" font-size="11">• Fixed-size partitions</text>
      <text x="125" y="75" text-anchor="middle" fill="#333" font-size="11">• Internal fragmentation</text>

      <text x="125" y="95" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Dynamic Partitioning:</text>
      <text x="125" y="110" text-anchor="middle" fill="#333" font-size="11">• Variable-size partitions</text>
      <text x="125" y="125" text-anchor="middle" fill="#333" font-size="11">• External fragmentation</text>

      <text x="125" y="145" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Allocation Algorithms:</text>
      <text x="125" y="165" text-anchor="middle" fill="#333" font-size="11">• First Fit</text>
      <text x="125" y="180" text-anchor="middle" fill="#333" font-size="11">• Best Fit</text>
      <text x="125" y="195" text-anchor="middle" fill="#333" font-size="11">• Worst Fit</text>
      <text x="125" y="210" text-anchor="middle" fill="#333" font-size="11">• Next Fit</text>
    </g>
  </g>

  <!-- Virtual Memory -->
  <g transform="translate(650, 120)">
    <rect x="0" y="0" width="500" height="320" rx="10" fill="white" stroke="#666" stroke-width="2" filter="url(#shadow)"/>
    <text x="250" y="25" text-anchor="middle" fill="#333" font-size="20" font-weight="bold">Virtual Memory System</text>

    <!-- Virtual Memory Concept -->
    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="180" height="240" rx="8" fill="#E8EAF6" stroke="#3F51B5" stroke-width="2"/>
      <text x="90" y="20" text-anchor="middle" fill="#3F51B5" font-size="16" font-weight="bold">Virtual Memory</text>

      <text x="90" y="45" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Benefits:</text>
      <text x="90" y="65" text-anchor="middle" fill="#333" font-size="11">• Larger address space</text>
      <text x="90" y="80" text-anchor="middle" fill="#333" font-size="11">• Process isolation</text>
      <text x="90" y="95" text-anchor="middle" fill="#333" font-size="11">• Memory sharing</text>
      <text x="90" y="110" text-anchor="middle" fill="#333" font-size="11">• Protection</text>

      <text x="90" y="135" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Implementation:</text>
      <text x="90" y="155" text-anchor="middle" fill="#333" font-size="11">• Paging</text>
      <text x="90" y="170" text-anchor="middle" fill="#333" font-size="11">• Segmentation</text>
      <text x="90" y="185" text-anchor="middle" fill="#333" font-size="11">• Segmented Paging</text>

      <text x="90" y="210" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Page Replacement:</text>
      <text x="90" y="225" text-anchor="middle" fill="#333" font-size="11">FIFO, LRU, Optimal</text>
    </g>

    <!-- Paging System -->
    <g transform="translate(250, 50)">
      <rect x="0" y="0" width="220" height="240" rx="8" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2"/>
      <text x="110" y="20" text-anchor="middle" fill="#9C27B0" font-size="16" font-weight="bold">Paging System</text>

      <!-- Page Table Illustration -->
      <g transform="translate(20, 30)">
        <text x="90" y="15" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Page Table</text>

        <!-- Virtual Pages -->
        <text x="30" y="35" text-anchor="middle" fill="#333" font-size="10">Virtual Page</text>
        <rect x="10" y="40" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="30" y="52" text-anchor="middle" fill="#333" font-size="9">0</text>

        <rect x="10" y="60" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="30" y="72" text-anchor="middle" fill="#333" font-size="9">1</text>

        <rect x="10" y="80" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="30" y="92" text-anchor="middle" fill="#333" font-size="9">2</text>

        <!-- Arrow -->
        <path d="M55 67 L85 67" stroke="#666" stroke-width="1" marker-end="url(#smallarrow)" fill="none"/>

        <!-- Physical Frames -->
        <text x="130" y="35" text-anchor="middle" fill="#333" font-size="10">Physical Frame</text>
        <rect x="110" y="40" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="130" y="52" text-anchor="middle" fill="#333" font-size="9">2</text>

        <rect x="110" y="60" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="130" y="72" text-anchor="middle" fill="#333" font-size="9">5</text>

        <rect x="110" y="80" width="40" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="130" y="92" text-anchor="middle" fill="#333" font-size="9">1</text>

        <defs>
          <marker id="smallarrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
            <polygon points="0 0, 8 3, 0 6" fill="#666"/>
          </marker>
        </defs>
      </g>

      <text x="110" y="140" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Page Size:</text>
      <text x="110" y="155" text-anchor="middle" fill="#333" font-size="11">Typically 4KB - 64KB</text>

      <text x="110" y="175" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Translation:</text>
      <text x="110" y="190" text-anchor="middle" fill="#333" font-size="11">Virtual → Physical</text>
      <text x="110" y="205" text-anchor="middle" fill="#333" font-size="11">Using MMU</text>

      <text x="110" y="225" text-anchor="middle" fill="#333" font-size="11">TLB for speed</text>
    </g>
  </g>

  <!-- File Management -->
  <g transform="translate(50, 470)">
    <rect x="0" y="0" width="550" height="300" rx="10" fill="white" stroke="#666" stroke-width="2" filter="url(#shadow)"/>
    <text x="275" y="25" text-anchor="middle" fill="#333" font-size="20" font-weight="bold">File System Management</text>

    <!-- File Operations -->
    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="200" height="220" rx="8" fill="url(#fileGrad)" stroke="#2196F3" stroke-width="2"/>
      <text x="100" y="20" text-anchor="middle" fill="white" font-size="16" font-weight="bold">File Operations</text>

      <text x="100" y="45" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Basic Operations:</text>
      <text x="100" y="65" text-anchor="middle" fill="#333" font-size="11">• Create</text>
      <text x="100" y="80" text-anchor="middle" fill="#333" font-size="11">• Open</text>
      <text x="100" y="95" text-anchor="middle" fill="#333" font-size="11">• Read</text>
      <text x="100" y="110" text-anchor="middle" fill="#333" font-size="11">• Write</text>
      <text x="100" y="125" text-anchor="middle" fill="#333" font-size="11">• Close</text>
      <text x="100" y="140" text-anchor="middle" fill="#333" font-size="11">• Delete</text>

      <text x="100" y="165" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">File Attributes:</text>
      <text x="100" y="185" text-anchor="middle" fill="#333" font-size="11">• Name, Type, Size</text>
      <text x="100" y="200" text-anchor="middle" fill="#333" font-size="11">• Creation/Modification Time</text>
      <text x="100" y="215" text-anchor="middle" fill="#333" font-size="11">• Permissions, Owner</text>
    </g>

    <!-- Directory Structure -->
    <g transform="translate(270, 50)">
      <rect x="0" y="0" width="250" height="220" rx="8" fill="#FFECB3" stroke="#FFA000" stroke-width="2"/>
      <text x="125" y="20" text-anchor="middle" fill="#FFA000" font-size="16" font-weight="bold">Directory Structure</text>

      <!-- Tree Structure -->
      <g transform="translate(50, 30)">
        <text x="75" y="15" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Hierarchical Structure</text>

        <!-- Root -->
        <rect x="60" y="20" width="30" height="15" fill="white" stroke="#FFA000" stroke-width="1"/>
        <text x="75" y="32" text-anchor="middle" fill="#333" font-size="9">root</text>

        <!-- Level 1 -->
        <rect x="20" y="50" width="30" height="15" fill="white" stroke="#FFA000" stroke-width="1"/>
        <text x="35" y="62" text-anchor="middle" fill="#333" font-size="9">bin</text>

        <rect x="100" y="50" width="30" height="15" fill="white" stroke="#FFA000" stroke-width="1"/>
        <text x="115" y="62" text-anchor="middle" fill="#333" font-size="9">home</text>

        <!-- Level 2 -->
        <rect x="85" y="80" width="30" height="15" fill="white" stroke="#FFA000" stroke-width="1"/>
        <text x="100" y="92" text-anchor="middle" fill="#333" font-size="9">user1</text>

        <rect x="120" y="80" width="30" height="15" fill="white" stroke="#FFA000" stroke-width="1"/>
        <text x="135" y="92" text-anchor="middle" fill="#333" font-size="9">user2</text>

        <!-- Connecting lines -->
        <line x1="75" y1="35" x2="35" y2="50" stroke="#666" stroke-width="1"/>
        <line x1="75" y1="35" x2="115" y2="50" stroke="#666" stroke-width="1"/>
        <line x1="115" y1="65" x2="100" y2="80" stroke="#666" stroke-width="1"/>
        <line x1="115" y1="65" x2="135" y2="80" stroke="#666" stroke-width="1"/>
      </g>

      <text x="125" y="140" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Path Types:</text>
      <text x="125" y="160" text-anchor="middle" fill="#333" font-size="11">Absolute: /home/user1/file.txt</text>
      <text x="125" y="175" text-anchor="middle" fill="#333" font-size="11">Relative: ../user2/doc.pdf</text>

      <text x="125" y="195" text-anchor="middle" fill="#333" font-size="12" font-weight="bold">Directory Operations:</text>
      <text x="125" y="210" text-anchor="middle" fill="#333" font-size="11">mkdir, rmdir, ls, cd</text>
    </g>
  </g>

  <!-- File Allocation Methods -->
  <g transform="translate(650, 470)">
    <rect x="0" y="0" width="500" height="300" rx="10" fill="white" stroke="#666" stroke-width="2" filter="url(#shadow)"/>
    <text x="250" y="25" text-anchor="middle" fill="#333" font-size="20" font-weight="bold">File Allocation Methods</text>

    <!-- Contiguous Allocation -->
    <g transform="translate(50, 50)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#FFCDD2" stroke="#F44336" stroke-width="2"/>
      <text x="65" y="20" text-anchor="middle" fill="#F44336" font-size="14" font-weight="bold">Contiguous</text>
      <text x="65" y="40" text-anchor="middle" fill="#333" font-size="11">Sequential blocks</text>

      <!-- Blocks representation -->
      <g transform="translate(15, 50)">
        <rect x="0" y="0" width="15" height="15" fill="white" stroke="#F44336" stroke-width="1"/>
        <rect x="15" y="0" width="15" height="15" fill="white" stroke="#F44336" stroke-width="1"/>
        <rect x="30" y="0" width="15" height="15" fill="white" stroke="#F44336" stroke-width="1"/>
        <rect x="45" y="0" width="15" height="15" fill="white" stroke="#F44336" stroke-width="1"/>
        <text x="50" y="25" text-anchor="middle" fill="#333" font-size="9">File A</text>
      </g>

      <text x="65" y="85" text-anchor="middle" fill="#333" font-size="10">Fast access</text>
      <text x="65" y="100" text-anchor="middle" fill="#333" font-size="10">External fragmentation</text>
    </g>

    <!-- Linked Allocation -->
    <g transform="translate(200, 50)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#C8E6C9" stroke="#4CAF50" stroke-width="2"/>
      <text x="65" y="20" text-anchor="middle" fill="#4CAF50" font-size="14" font-weight="bold">Linked</text>
      <text x="65" y="40" text-anchor="middle" fill="#333" font-size="11">Scattered blocks</text>

      <!-- Blocks representation -->
      <g transform="translate(15, 50)">
        <rect x="0" y="0" width="15" height="15" fill="white" stroke="#4CAF50" stroke-width="1"/>
        <rect x="30" y="0" width="15" height="15" fill="white" stroke="#4CAF50" stroke-width="1"/>
        <rect x="60" y="0" width="15" height="15" fill="white" stroke="#4CAF50" stroke-width="1"/>
        <rect x="90" y="0" width="15" height="15" fill="white" stroke="#4CAF50" stroke-width="1"/>

        <!-- Arrows -->
        <path d="M15 7 L30 7" stroke="#4CAF50" stroke-width="1" marker-end="url(#smallarrow)" fill="none"/>
        <path d="M45 7 L60 7" stroke="#4CAF50" stroke-width="1" marker-end="url(#smallarrow)" fill="none"/>
        <path d="M75 7 L90 7" stroke="#4CAF50" stroke-width="1" marker-end="url(#smallarrow)" fill="none"/>

        <text x="50" y="25" text-anchor="middle" fill="#333" font-size="9">File B</text>
      </g>

      <text x="65" y="85" text-anchor="middle" fill="#333" font-size="10">No fragmentation</text>
      <text x="65" y="100" text-anchor="middle" fill="#333" font-size="10">Sequential access only</text>
    </g>

    <!-- Indexed Allocation -->
    <g transform="translate(350, 50)">
      <rect x="0" y="0" width="130" height="120" rx="8" fill="#E1BEE7" stroke="#9C27B0" stroke-width="2"/>
      <text x="65" y="20" text-anchor="middle" fill="#9C27B0" font-size="14" font-weight="bold">Indexed</text>
      <text x="65" y="40" text-anchor="middle" fill="#333" font-size="11">Index block</text>

      <!-- Index block -->
      <g transform="translate(20, 50)">
        <rect x="0" y="0" width="20" height="30" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <text x="10" y="35" text-anchor="middle" fill="#333" font-size="8">Index</text>

        <!-- Data blocks -->
        <rect x="35" y="0" width="15" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <rect x="55" y="0" width="15" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>
        <rect x="75" y="0" width="15" height="15" fill="white" stroke="#9C27B0" stroke-width="1"/>

        <!-- Lines from index to blocks -->
        <line x1="20" y1="10" x2="35" y2="7" stroke="#9C27B0" stroke-width="1"/>
        <line x1="20" y1="15" x2="55" y2="7" stroke="#9C27B0" stroke-width="1"/>
        <line x1="20" y1="20" x2="75" y2="7" stroke="#9C27B0" stroke-width="1"/>
      </g>

      <text x="65" y="85" text-anchor="middle" fill="#333" font-size="10">Random access</text>
      <text x="65" y="100" text-anchor="middle" fill="#333" font-size="10">Index overhead</text>
    </g>

    <!-- File System Types -->
    <g transform="translate(50, 190)">
      <rect x="0" y="0" width="400" height="80" rx="8" fill="#F1F8E9" stroke="#689F38" stroke-width="2"/>
      <text x="200" y="20" text-anchor="middle" fill="#689F38" font-size="16" font-weight="bold">Common File Systems</text>

      <text x="100" y="45" text-anchor="middle" fill="#333" font-size="12">• FAT32 (Windows)</text>
      <text x="250" y="45" text-anchor="middle" fill="#333" font-size="12">• NTFS (Windows)</text>
      <text x="350" y="45" text-anchor="middle" fill="#333" font-size="12">• ext4 (Linux)</text>

      <text x="100" y="65" text-anchor="middle" fill="#333" font-size="12">• HFS+ (macOS)</text>
      <text x="250" y="65" text-anchor="middle" fill="#333" font-size="12">• APFS (macOS)</text>
      <text x="350" y="65" text-anchor="middle" fill="#333" font-size="12">• ZFS (Solaris)</text>
    </g>
  </g>
</svg>